<template id="aiplugs-nav-item">
  <style>
    :host {
      display: flex;
      flex-direction: column;
    }
    .left {
      width: 64px;
      min-width: 64px;
      font-size: 24px;
      display: inline-block;
      text-align: center;
    }
    a {
      padding: 8px 0;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: background linear 0.25s;
      text-overflow:clip;
      white-space: nowrap;
      text-decoration: none;
      color: var(--color-text-inverted);
    }
    a:hover {
      background: rgba(255,255,255,0.15);      
    }
    :host(.active) a, a:active {
      transition: none;      
      background: var(--color-accent);
    }
    .left, .right {
      user-select: none;
    }
  </style>  
  <a>
    <span class="left">
      <slot name="icon"></slot>
    </span>
    <span class="right">
      <slot></slot>
    </span>
  </a>
</template>
<template id="aiplugs-nav-items">
  <style>
    :host {
      display: flex;
      flex-direction: column;
      width: calc(64px + 180px);
      color: var(--color-text-inverted);
      overflow: hidden;
      transition: all linear .05s;
      position: relative;
      z-index: 0;
    }
    :host(:first-child)::before {
      content: "";
      position: absolute;
      width: calc(100vw + 10px);
      height: calc(100vh + 10px);
      top: -5px;
      bottom: -5px;
      left: -5px;
      right: -5px;
      filter: blur(5px);
      background: var(--bg-image-primary);
      background-size: cover;  

      z-index: -1;  
    }
  </style>
  <slot></slot>
  <slot name="bottom"></slot>
</template>
<template id="aiplugs-nav-separator">
  <style>
    :host {
      flex: 1;
    }
  </style>
</template>
<script>
  (function(){
    const tree = document.currentScript.ownerDocument;
    class XItems extends HTMLElement {
      constructor() {
        super();
        const template = tree.getElementById('aiplugs-nav-items').content;
        const shadow = this.attachShadow({mode:'open'});
        shadow.appendChild(template.cloneNode(true));
      }
    }
    customElements.define('aiplugs-nav-items', XItems);
    class XItem extends HTMLElement {
      constructor() {
        super();
        const template = tree.getElementById('aiplugs-nav-item').content;
        const shadow = this.attachShadow({mode:'open'});
        shadow.appendChild(template.cloneNode(true));
      }
      static get observedAttributes() {
        return ["href"];
      }
      attributeChangedCallback(attrName, oldVal, newVal) {
        this.shadowRoot.querySelector('a').href = newVal;
      }
    }
    customElements.define('aiplugs-nav-item', XItem);
    class XSeparator extends HTMLElement {
      constructor() {
        super();
        const template = tree.getElementById('aiplugs-nav-separator').content;
        const shadow = this.attachShadow({mode:'open'});
        shadow.appendChild(template.cloneNode(true));
      }
    }
    customElements.define('aiplugs-nav-separator', XSeparator);
  }())
</script>